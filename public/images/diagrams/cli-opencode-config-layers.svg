<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000" role="img" aria-labelledby="cli-opencode-config-layers-title cli-opencode-config-layers-desc">
  <title id="cli-opencode-config-layers-title">OpenCode CLI Configuration Layers</title>
  <desc id="cli-opencode-config-layers-desc">Diagram showing the hierarchical configuration system of OpenCode CLI from global to project-specific settings.</desc>

  <defs>
    <!-- Background Gradient -->
    <linearGradient id="bg-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0a0a0a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1a1a2e;stop-opacity:1" />
    </linearGradient>

    <!-- Cyan Gradient -->
    <linearGradient id="cyan-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#00d9ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0099cc;stop-opacity:1" />
    </linearGradient>

    <!-- Purple Gradient -->
    <linearGradient id="purple-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#a855f7;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>

    <!-- Orange Gradient -->
    <linearGradient id="orange-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </linearGradient>

    <!-- Green Gradient -->
    <linearGradient id="green-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>

    <!-- Glow Filter -->
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="5" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Arrow Marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#00d9ff"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1000" fill="url(#bg-gradient)"/>

  <!-- Title -->
  <text x="700" y="60" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="36" fill="#ffffff">
    Configuration Layers
  </text>
  <text x="700" y="95" text-anchor="middle" font-family="'Inter', sans-serif" font-size="18" fill="#9ca3af">
    OpenCode uses a layered configuration system with specific precedence rules
  </text>

  <!-- Layer 1: Global Config -->
  <g transform="translate(200, 140)">
    <rect x="0" y="0" width="1000" height="180" rx="16" fill="#1a1a2e" stroke="url(#cyan-gradient)" stroke-width="3" filter="url(#glow)"/>

    <!-- Header -->
    <rect x="0" y="0" width="1000" height="50" rx="16" fill="url(#cyan-gradient)" opacity="0.2"/>
    <rect x="0" y="30" width="1000" height="20" fill="url(#cyan-gradient)" opacity="0.2"/>

    <circle cx="40" cy="25" r="18" fill="url(#cyan-gradient)"/>
    <text x="40" y="31" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="16" fill="#ffffff">
      1
    </text>

    <text x="80" y="33" font-family="'Inter', sans-serif" font-weight="700" font-size="20" fill="#00d9ff">
      Global Configuration
    </text>

    <!-- File Path -->
    <g transform="translate(40, 70)">
      <text x="0" y="0" font-family="'Inter', sans-serif" font-weight="600" font-size="14" fill="#ffffff">
        Location:
      </text>
      <rect x="90" y="-12" width="400" height="30" rx="6" fill="#0a0a0a" stroke="#00d9ff" stroke-width="1"/>
      <text x="290" y="8" text-anchor="middle" font-family="'Fira Code', monospace" font-size="12" fill="#00d9ff">
        ~/.opencode/config.yaml
      </text>
    </g>

    <!-- Settings -->
    <g transform="translate(40, 115)">
      <text x="0" y="0" font-family="'Inter', sans-serif" font-size="12" fill="#9ca3af">
        Default model, API keys, user preferences, telemetry settings
      </text>

      <rect x="0" y="15" width="280" height="40" rx="8" fill="#0a0a0a" opacity="0.5"/>
      <text x="15" y="32" font-family="'Fira Code', monospace" font-size="10" fill="#9ca3af">
        <tspan x="15" dy="0">default_model: "gpt-4"</tspan>
        <tspan x="15" dy="14">api_key: "sk-..."</tspan>
      </rect>
    </g>

    <!-- Precedence -->
    <g transform="translate(750, 70)">
      <rect x="0" y="0" width="200" height="90" rx="10" fill="url(#cyan-gradient)" opacity="0.1"/>
      <text x="100" y="25" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="14" fill="#00d9ff">
        Precedence: Lowest
      </text>
      <text x="100" y="50" text-anchor="middle" font-family="'Inter', sans-serif" font-size="11" fill="#9ca3af">
        Overridden by all
      </text>
      <text x="100" y="65" text-anchor="middle" font-family="'Inter', sans-serif" font-size="11" fill="#9ca3af">
        other layers
      </text>
    </g>
  </g>

  <!-- Arrow Down -->
  <path d="M 700 320 L 700 350" stroke="url(#cyan-gradient)" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Layer 2: Project Config -->
  <g transform="translate(200, 360)">
    <rect x="0" y="0" width="1000" height="180" rx="16" fill="#1a1a2e" stroke="url(#purple-gradient)" stroke-width="3" filter="url(#glow)"/>

    <!-- Header -->
    <rect x="0" y="0" width="1000" height="50" rx="16" fill="url(#purple-gradient)" opacity="0.2"/>
    <rect x="0" y="30" width="1000" height="20" fill="url(#purple-gradient)" opacity="0.2"/>

    <circle cx="40" cy="25" r="18" fill="url(#purple-gradient)"/>
    <text x="40" y="31" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="16" fill="#ffffff">
      2
    </text>

    <text x="80" y="33" font-family="'Inter', sans-serif" font-weight="700" font-size="20" fill="#a855f7">
      Project Configuration
    </text>

    <!-- File Path -->
    <g transform="translate(40, 70)">
      <text x="0" y="0" font-family="'Inter', sans-serif" font-weight="600" font-size="14" fill="#ffffff">
        Location:
      </text>
      <rect x="90" y="-12" width="400" height="30" rx="6" fill="#0a0a0a" stroke="#a855f7" stroke-width="1"/>
      <text x="290" y="8" text-anchor="middle" font-family="'Fira Code', monospace" font-size="12" fill="#a855f7">
        .opencode/config.yaml
      </text>
    </g>

    <!-- Settings -->
    <g transform="translate(40, 115)">
      <text x="0" y="0" font-family="'Inter', sans-serif" font-size="12" fill="#9ca3af">
        Project-specific model, context files to include, ignore patterns, team rules
      </text>

      <rect x="0" y="15" width="320" height="40" rx="8" fill="#0a0a0a" opacity="0.5"/>
      <text x="15" y="32" font-family="'Fira Code', monospace" font-size="10" fill="#9ca3af">
        <tspan x="15" dy="0">model: "claude-3-opus"</tspan>
        <tspan x="15" dy="14">context: ["src/", "docs/"]</tspan>
      </rect>
    </g>

    <!-- Precedence -->
    <g transform="translate(750, 70)">
      <rect x="0" y="0" width="200" height="90" rx="10" fill="url(#purple-gradient)" opacity="0.1"/>
      <text x="100" y="25" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="14" fill="#a855f7">
        Precedence: Medium
      </text>
      <text x="100" y="50" text-anchor="middle" font-family="'Inter', sans-serif" font-size="11" fill="#9ca3af">
        Overrides global
      </text>
      <text x="100" y="65" text-anchor="middle" font-family="'Inter', sans-serif" font-size="11" fill="#9ca3af">
        Overridden by env
      </text>
    </g>
  </g>

  <!-- Arrow Down -->
  <path d="M 700 540 L 700 570" stroke="url(#purple-gradient)" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Layer 3: Environment Variables -->
  <g transform="translate(200, 580)">
    <rect x="0" y="0" width="1000" height="180" rx="16" fill="#1a1a2e" stroke="url(#orange-gradient)" stroke-width="3" filter="url(#glow)"/>

    <!-- Header -->
    <rect x="0" y="0" width="1000" height="50" rx="16" fill="url(#orange-gradient)" opacity="0.2"/>
    <rect x="0" y="30" width="1000" height="20" fill="url(#orange-gradient)" opacity="0.2"/>

    <circle cx="40" cy="25" r="18" fill="url(#orange-gradient)"/>
    <text x="40" y="31" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="16" fill="#ffffff">
      3
    </text>

    <text x="80" y="33" font-family="'Inter', sans-serif" font-weight="700" font-size="20" fill="#f59e0b">
      Environment Variables
    </text>

    <!-- Examples -->
    <g transform="translate(40, 70)">
      <text x="0" y="0" font-family="'Inter', sans-serif" font-weight="600" font-size="14" fill="#ffffff">
        Available variables:
      </text>

      <rect x="0" y="15" width="200" height="30" rx="6" fill="#0a0a0a" stroke="#f59e0b" stroke-width="1"/>
      <text x="100" y="35" text-anchor="middle" font-family="'Fira Code', monospace" font-size="11" fill="#f59e0b">
        OPENCODE_MODEL
      </text>

      <rect x="220" y="15" width="200" height="30" rx="6" fill="#0a0a0a" stroke="#f59e0b" stroke-width="1"/>
      <text x="320" y="35" text-anchor="middle" font-family="'Fira Code', monospace" font-size="11" fill="#f59e0b">
        OPENCODE_API_KEY
      </text>

      <rect x="440" y="15" width="180" height="30" rx="6" fill="#0a0a0a" stroke="#f59e0b" stroke-width="1"/>
      <text x="530" y="35" text-anchor="middle" font-family="'Fira Code', monospace" font-size="11" fill="#f59e0b">
        OPENCODE_LOG_LEVEL
      </text>
    </g>

    <!-- Example Command -->
    <g transform="translate(40, 135)">
      <text x="0" y="0" font-family="'Inter', sans-serif" font-size="12" fill="#9ca3af">
        Example:
      </text>
      <rect x="70" y="-12" width="350" height="25" rx="6" fill="#0a0a0a" opacity="0.5"/>
      <text x="90" y="5" font-family="'Fira Code', monospace" font-size="10" fill="#9ca3af">
        OPENCODE_MODEL=gpt-4 opcode ask
      </text>
    </g>

    <!-- Precedence -->
    <g transform="translate(750, 70)">
      <rect x="0" y="0" width="200" height="90" rx="10" fill="url(#orange-gradient)" opacity="0.1"/>
      <text x="100" y="25" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="14" fill="#f59e0b">
        Precedence: High
      </text>
      <text x="100" y="50" text-anchor="middle" font-family="'Inter', sans-serif" font-size="11" fill="#9ca3af">
        Overrides global &amp;
      </text>
      <text x="100" y="65" text-anchor="middle" font-family="'Inter', sans-serif" font-size="11" fill="#9ca3af">
        project config
      </text>
    </g>
  </g>

  <!-- Arrow Down -->
  <path d="M 700 760 L 700 790" stroke="url(#orange-gradient)" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Layer 4: CLI Flags -->
  <g transform="translate(200, 800)">
    <rect x="0" y="0" width="1000" height="150" rx="16" fill="#1a1a2e" stroke="url(#green-gradient)" stroke-width="3" filter="url(#glow)"/>

    <!-- Header -->
    <rect x="0" y="0" width="1000" height="50" rx="16" fill="url(#green-gradient)" opacity="0.2"/>
    <rect x="0" y="30" width="1000" height="20" fill="url(#green-gradient)" opacity="0.2"/>

    <circle cx="40" cy="25" r="18" fill="url(#green-gradient)"/>
    <text x="40" y="31" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="16" fill="#ffffff">
      4
    </text>

    <text x="80" y="33" font-family="'Inter', sans-serif" font-weight="700" font-size="20" fill="#10b981">
      Command-Line Flags
    </text>

    <!-- Examples -->
    <g transform="translate(40, 70)">
      <text x="0" y="0" font-family="'Inter', sans-serif" font-weight="600" font-size="14" fill="#ffffff">
        Flags override everything:
      </text>

      <rect x="0" y="15" width="180" height="30" rx="6" fill="#0a0a0a" stroke="#10b981" stroke-width="1"/>
      <text x="90" y="35" text-anchor="middle" font-family="'Fira Code', monospace" font-size="11" fill="#10b981">
        --model gpt-4
      </text>

      <rect x="200" y="15" width="180" height="30" rx="6" fill="#0a0a0a" stroke="#10b981" stroke-width="1"/>
      <text x="290" y="35" text-anchor="middle" font-family="'Fira Code', monospace" font-size="11" fill="#10b981">
        --temperature 0.7
      </text>

      <rect x="400" y="15" width="200" height="30" rx="6" fill="#0a0a0a" stroke="#10b981" stroke-width="1"/>
      <text x="500" y="35" text-anchor="middle" font-family="'Fira Code', monospace" font-size="11" fill="#10b981">
        --context ./src
      </text>

      <rect x="620" y="15" width="150" height="30" rx="6" fill="#0a0a0a" stroke="#10b981" stroke-width="1"/>
      <text x="695" y="35" text-anchor="middle" font-family="'Fira Code', monospace" font-size="11" fill="#10b981">
        --verbose
      </text>
    </g>

    <!-- Precedence -->
    <g transform="translate(800, 65)">
      <rect x="0" y="0" width="150" height="60" rx="10" fill="url(#green-gradient)" opacity="0.2"/>
      <text x="75" y="25" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="14" fill="#10b981">
        Precedence:
      </text>
      <text x="75" y="45" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="14" fill="#10b981">
        HIGHEST
      </text>
    </g>
  </g>

  <!-- Side Note -->
  <g transform="translate(1100, 140)">
    <rect x="0" y="0" width="260" height="450" rx="12" fill="#0a0a0a" opacity="0.3" stroke="#00d9ff" stroke-width="1"/>
    <text x="130" y="30" text-anchor="middle" font-family="'Inter', sans-serif" font-weight="700" font-size="16" fill="#00d9ff">
      üìù Quick Tips
    </text>

    <g transform="translate(20, 55)">
      <text x="0" y="0" font-family="'Inter', sans-serif" font-size="12" fill="#e0e0e0">
        <tspan x="0" dy="0">‚Ä¢ Use .opencode/ for project</tspan>
        <tspan x="0" dy="18">  settings that ship with code</tspan>

        <tspan x="0" dy="35">‚Ä¢ Environment variables ideal</tspan>
        <tspan x="0" dy="18">  for CI/CD and secrets</tspan>

        <tspan x="0" dy="35">‚Ä¢ CLI flags for one-off</tspan>
        <tspan x="0" dy="18">  overrides</tspan>

        <tspan x="0" dy="35">‚Ä¢ Check current config:</tspan>
      </text>
      <rect x="-10" y="145" width="240" height="25" rx="6" fill="#0a0a0a" stroke="#00d9ff" stroke-width="1"/>
      <text x="110" y="162" text-anchor="middle" font-family="'Fira Code', monospace" font-size="10" fill="#00d9ff">
        opcode config --show
      </text>

      <tspan x="0" dy="40" font-family="'Inter', sans-serif" font-size="12" fill="#e0e0e0">
        <tspan x="0" dy="0">‚Ä¢ Validate config:</tspan>
      </tspan>
      <rect x="-10" y="210" width="240" height="25" rx="6" fill="#0a0a0a" stroke="#00d9ff" stroke-width="1"/>
      <text x="110" y="227" text-anchor="middle" font-family="'Fira Code', monospace" font-size="10" fill="#00d9ff">
        opcode config --validate
      </text>

      <tspan x="0" dy="40" font-family="'Inter', sans-serif" font-size="12" fill="#e0e0e0">
        <tspan x="0" dy="0">‚Ä¢ Config files support YAML</tspan>
        <tspan x="0" dy="18">  and JSON formats</tspan>
      </text>
    </g>
  </g>
</svg>
